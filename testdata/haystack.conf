[haystack]
# OpenActa/Haystack log storage system - Configuration/Settings
#
# All settings mandatory, no defaults. This keeps things explicit and safer.

# === Permissions ===
# OpenActa/Haystack is very very picky about permissions.
# Any dir/file has to be owned by, and in the primary group. Nothing else.

user = arjen
group = arjen

# === Locations ===
# Recommendation: keep datastore_dir and catalogue_dir on separate mounts.
# /var/lib/openacta resp. /etc/openacta/catalogue
# Keystore can be separate again, or share with catalogue.
# /etc/openacta/keystore.list

# Haystack store
datastore_dir  = /tmp/openacta/data
# Our Haystack catalogue with SHA-512 signatures
catalogue_dir  = /tmp/openacta/catalogue
# Our AES key store
aes_keystore_list  = ./testdata/keystore.list

# === Haystack Object store ===

# datastore_object_store

# catalogue_object_store

# === Limits & Timers ===
# For sizes, nM (megabytes) and nG (gigabytes) shorthand is allowed
# For times, a suffix of s (seconds) or m (minutes) is allowed

# Max size of one Haystack (in memory), before starting a new one. Counted
# before de-dupping strings or compression, so the files will be (far) shorter.
# Specify in 64M-1GB range
haystack_wait_maxsize = 512M

# Min size of Haybale before possibly flushing:
# wait_minsize and (wait_mintime or wait_maxtime) must both be true for a flush
# (0=rule inactive)
haybale_wait_minsize = 32M

# Min seconds to wait for more data before flushing Haybale
# (0=inactive) - also see haybale_wait_minsize
haybale_wait_mintime = 5m

# Max seconds to wait for more data before flushing Haybale
# (0=forever/inactive) - also see haybale_wait_minsize
haybale_wait_maxtime = 5m

# === Time vs Space ===
# CPU/time vs disk I/O and storage cost.

# bzip2 compression (0=off, 1=fast, 9=best).
# This mainly affects time required before disk writing Haybales.
# Leave this on 9 unless you have too much incoming data on a slow box with
# insufficient cores, or searches take too long (Haystack decompression time).
compression_level = 6

# === EOF ===
